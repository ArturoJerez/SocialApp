<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>{{title}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" *ngIf="identity" class="min-phone">
  <div class="container">
    <ion-grid>
      <ion-row>
        <ion-col>
          <form #newPubForm="ngForm">
            <ion-grid>
              <ion-row>
                <ion-col>
                  <ion-item>
                    <ion-avatar slot="start">
                      <img src="{{ url + 'get-image-user/' + identity.image }}" *ngIf="identity && identity.image" />
                      <img src="https://www.inmosenna.com/wp-content/uploads/2018/07/avatar-user-business-man-399587fe24739d5a-512x512.png" *ngIf="identity && !identity.image" />
                    </ion-avatar>
                    <ion-label>En que estas pensando?</ion-label>
                  </ion-item>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col>
                  <textarea class="form-control" name="text" #text="ngModel" [(ngModel)]="publication.text" required></textarea>
                  <span class="alert alert-danger" *ngIf="!text.valid && text.touched">
                    El texto es obligatorio
                  </span>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col>
                  <ion-label>Subir imagen</ion-label>
                  <ion-input type="file" placeholder="Subir Imagen" (change)="fileChangeEvent($event)"></ion-input>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col>
                  <ion-button [disabled]="!newPubForm.form.valid" type="submit" (click)="onSubmit($event)">Publicar</ion-button>
                </ion-col>
              </ion-row>
            </ion-grid>
          </form>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>
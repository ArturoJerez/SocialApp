<ion-header [translucent]="true" class="min-phone" slot="fixed">
  <ion-toolbar>
    <ion-title>
      Inicio
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" *ngIf="identity">
  <app-explore-container title="Bienvenido a SocialApp"></app-explore-container>
  <ion-card class="min-window">
    <ion-item>
      <ion-avatar slot="start">
        <img src="{{ url + 'get-image-user/' + identity.image }}" *ngIf="identity && identity.image" />
        <img src="https://www.inmosenna.com/wp-content/uploads/2018/07/avatar-user-business-man-399587fe24739d5a-512x512.png" *ngIf="identity && !identity.image" />
      </ion-avatar>
      <form #newPubForm="ngForm">
        <ion-label position="floating">En que estas pensando?</ion-label>
        <textarea class="form-control" name="text" #text="ngModel" [(ngModel)]="publication.text" required></textarea>
        <span class="alert alert-danger" *ngIf="!text.valid && text.touched">
          El texto es obligatorio
        </span>

        <ion-label>Subir imagen</ion-label>
        <ion-input type="file" name="file" #file="ngModel" [(ngModel)]="publication.file" placeholder="Subir Imagen"></ion-input>

        <button [disabled]="!newPubForm.form.valid" type="submit" (click)="onSubmit()" class="btn btn-primary">Publicar</button>
      </form>
    </ion-item>
  </ion-card>

  <ion-card id="publications">
    
  </ion-card>

  <ion-fab class="min-phone" vertical="bottom" horizontal="end" slot="fixed" *ngIf="identity">
    <ion-button href="/publication">
        <ion-icon name="brush-outline"></ion-icon>
    </ion-button>
  </ion-fab>
</ion-content>

<ion-content [fullscreen]="true" *ngIf="!identity">
  <app-explore-container title="Bienvenido a SocialApp"></app-explore-container>
</ion-content>
